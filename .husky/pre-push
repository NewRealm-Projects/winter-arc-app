#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-push checks..."
echo ""

# 1. TypeScript type checking
echo "ğŸ“˜ TypeScript type checking..."
npm run typecheck || {
  echo "âŒ TypeScript errors found. Push aborted."
  exit 1
}

# 2. ESLint
echo ""
echo "ğŸ” Running ESLint..."
npm run lint || {
  echo "âŒ ESLint errors found. Push aborted."
  exit 1
}

# 3. Unit tests
echo ""
echo "ğŸ§ª Running unit tests..."
npm run test:unit || {
  echo "âŒ Unit tests failed. Push aborted."
  exit 1
}

# 4. Build test (ensures code compiles)
echo ""
echo "ğŸ—ï¸  Testing production build..."
npm run build > /dev/null 2>&1 || {
  echo "âŒ Build failed. Push aborted."
  exit 1
}

echo ""
echo "âœ… All pre-push checks passed!"
echo ""
